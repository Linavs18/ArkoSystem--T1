<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">
<head>
  <title>Proveedores - ArkoSystem</title>
  <link rel="stylesheet" th:href="@{/assets/css/argon-dashboard.css}">
  <link rel="stylesheet" th:href="@{/assets/css/custom.css}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
</head>
<body>
<div layout:fragment="content">
  <div class="content-wrapper">

    <!-- Notificaciones de éxito -->
    <div th:if="${success}" class="alert alert-success alert-dismissible fade show" role="alert">
      <i class="bi bi-check-circle-fill"></i>
      <strong>¡Éxito!</strong> <span th:text="${success}"></span>
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>

    <!-- Notificaciones de error -->
    <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">
      <i class="bi bi-exclamation-triangle-fill"></i>
      <strong>Error:</strong> <span th:text="${error}"></span>
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>

    <!-- Encabezado con título y botón -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1 class="fw-bold" style="color: black;">
        <i class="fas fa-truck"></i> Proveedores
      </h1>
      <a th:href="@{/view/suppliers/form}" class="btn btn-custom-warning">
        <i class="fas fa-plus"></i> Añadir Proveedor
      </a>
    </div>

    <!-- Contenedor de tabla personalizada -->
    <div id="suppliersTable" class="custom-table-container">
      <!-- Cabecera -->
      <div class="row custom-table-header m-0">
        <div class="col text-center">ID</div>
        <div class="col text-center">Nombre</div>
        <div class="col text-center">Teléfono</div>
        <div class="col text-center">Dirección</div>
        <div class="col text-center">Email</div>
        <div class="col text-center">Acciones</div>
      </div>

      <!-- Filas dinámicas -->
      <div th:each="supplier : ${suppliers}" class="row custom-table-row m-0 align-items-center">
        <div class="col text-center" th:text="${supplier.id}"></div>
        <div class="col text-center" th:text="${supplier.name}"></div>
        <div class="col text-center" th:text="${supplier.phone}"></div>
        <div class="col text-center" th:text="${supplier.address}"></div>
        <div class="col text-center" th:text="${supplier.email}"></div>
        <div class="col text-center">
          <a th:href="@{/view/suppliers/edit/{id}(id=${supplier.id})}"
             class="btn btn-sm btn-success me-1">
            <i class="fas fa-edit"></i>
          </a>
          <form th:action="@{/view/suppliers/delete/{id}(id=${supplier.id})}"
                method="post"
                style="display:inline;"
                onsubmit="return confirm('¿Estás seguro de eliminar este proveedor?');">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" th:if="${_csrf != null}"/>
            <button type="submit" class="btn btn-sm btn-warning" title="Eliminar">
              <i class="fas fa-trash-alt"></i>
            </button>
          </form>
        </div>
      </div>

      <!-- Mensaje cuando no hay proveedores -->
      <div th:if="${#lists.isEmpty(suppliers)}" class="row m-0">
        <div class="col text-center py-3 text-muted">
          <em>No hay proveedores registrados.</em>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Estilos personalizados adicionales (opcional, si no están en custom.css) -->
<style>
  .custom-table-container {
      border: 1px solid #ddd;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin-top: 10px;
  }

  .custom-table-header {
      background-color: #d4a017;
      color: white;
      font-weight: bold;
      padding: 12px 0;
  }

  .custom-table-row {
      padding: 14px 0;
      border-bottom: 1px solid #eee;
      transition: background-color 0.2s;
  }

  .custom-table-row:hover {
      background-color: #f9f9f9;
  }

  .btn-custom-warning {
      background-color: #d4a017;
      color: white;
      border: none;
      font-weight: 500;
  }

  .btn-custom-warning:hover {
      background-color: #c18f0f;
      color: white;
  }
</style>

</body>
</html>